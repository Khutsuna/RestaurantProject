<div class="cart-container">
  <h1>Shopping Cart</h1>

  @if (cartItems$ | async; as items) {
    @if (items.length > 0) {
      <div class="cart-content">
        <div class="cart-items">
          @for (item of items; track item.product.id) {
            <div class="cart-item">
              <img [src]="item.product.image" [alt]="item.product.name" class="cart-item-image">
              <div class="cart-item-info">
                <h3>{{ item.product.name }}</h3>
                <p class="cart-item-price">${{ item.product.price.toFixed(2) }}</p>
              </div>
              <div class="cart-item-controls">
                <div class="quantity-controls">
                  <button (click)="decreaseQuantity(item.product.id, item.quantity)" class="qty-btn">-</button>
                  <span class="quantity">{{ item.quantity }}</span>
                  <button (click)="increaseQuantity(item.product.id, item.quantity)" class="qty-btn">+</button>
                </div>
                <p class="item-total">${{ (item.product.price * item.quantity).toFixed(2) }}</p>
                <button (click)="removeItem(item.product.id)" class="remove-btn">Delete</button>
              </div>
            </div>
          }
          
          <div class="cart-total">
            <div class="total-row">
              <span class="total-label">Total:</span>
              <span class="total-price">${{ getTotal().toFixed(2) }}</span>
            </div>
            <button class="checkout-btn">Checkout</button>
          </div>
        </div>
      </div>
    } @else {
      <div class="empty-cart">
        <p>Your cart is empty</p>
        <button routerLink="/" class="continue-shopping-btn">Continue Shopping</button>
      </div>
    }
  }
</div>
